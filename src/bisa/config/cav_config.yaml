# cav_config.yaml
/**:
  ros__parameters:
    cav_ids: [1,2,3,4]
    high_priority_ids: [1,2]
    local_path_size: 140
    search_window: 120

# -----------------------------------------------------------------------------
# MPC 튜닝 가이드 (YAML만 수정해서 빠르게 실험)
# -----------------------------------------------------------------------------
# 1) 반응 속도(코너를 얼마나 빨리 인지하는지)
#   - horizon:
#       작게(예: 50~80) -> 반응 빠름 / 크게(예: 100+) -> 부드럽지만 늦을 수 있음
#   - ref_preview_steps:
#       크게 -> 더 앞 코너를 미리 봄(조기 회전), 너무 크면 과민 가능
#   - max_omega_rate:
#       크게 -> 조향각속도(omega) 상승이 빨라짐, 작게 -> 완만
#
# 2) 회전 강도(얼마나 세게 꺾는지)
#   - max_angular_vel:
#       LTV 내부 곡률 한계로 매핑됨. 크게 -> 최대 회전 여유 증가
#   - max_omega_abs:
#       최종 yaw-rate 절대값 제한. 너무 작으면 코너에서 직진 성향
#
# 3) 속도
#   - max_velocity:
#       코너 실패 시 먼저 낮추면 안정적으로 추종됨
#
# 참고
#   - enable_path_fallback: false  (현재 MPC only 모드)
# -----------------------------------------------------------------------------

# 슬롯 01
mpc_tracker_cav01:
  ros__parameters:
    time_step: 0.05
    Q_pos: 240.0
    Q_heading: 170.0
    R_v: 1.2
    R_w: 1.3
    max_velocity: 0.70
    max_accel: 1.5
    max_angular_vel: 1.6
    max_omega_abs: 1.3
    max_omega_rate: 25.0
    max_v_rate: 4.0
    ref_preview_steps: 24
    enable_path_fallback: false
    horizon: 60

# 슬롯 02
mpc_tracker_cav02:
  ros__parameters:
    time_step: 0.05
    Q_pos: 240.0
    Q_heading: 170.0
    R_v: 1.2
    R_w: 1.3
    max_velocity: 0.70
    max_accel: 1.5
    max_angular_vel: 1.6
    max_omega_abs: 1.3
    max_omega_rate: 25.0
    max_v_rate: 4.0
    ref_preview_steps: 24
    enable_path_fallback: false
    horizon: 60

# 슬롯 03
mpc_tracker_cav03:
  ros__parameters:
    time_step: 0.05
    Q_pos: 300.0
    Q_heading: 230.0
    R_v: 1.0
    R_w: 1.4
    max_velocity: 0.60
    max_accel: 1.5
    max_angular_vel: 2.0
    max_omega_abs: 1.1
    max_omega_rate: 18.0
    max_v_rate: 3.0
    ref_preview_steps: 28
    enable_path_fallback: false
    horizon: 60

# 슬롯 04
mpc_tracker_cav04:
  ros__parameters:
    time_step: 0.05
    Q_pos: 240.0
    Q_heading: 170.0
    R_v: 1.2
    R_w: 1.3
    max_velocity: 0.62
    max_accel: 1.5
    max_angular_vel: 1.6
    max_omega_abs: 1.0
    max_omega_rate: 16.0
    max_v_rate: 4.0
    ref_preview_steps: 16
    enable_path_fallback: false
    horizon: 60

# HV 설정
hv_settings:
  - id: 19
    node_sequence: [38, 41, 62, 38]
  - id: 20
    node_sequence: [38, 41, 62, 38]
